{"version":3,"file":"babel.test.js","names":["_vitest","require","_core","_nodeFs","_interopRequireDefault","_nodePath","_babel","e","__esModule","default","test","each","name","filepath","path","resolve","__dirname","result","transformFileAsync","caller","supportsStaticESM","rewriteImportExtensions","jsxRuntime","codegenEnabled","configFile","babelrc","plugins","plugin","extension","expected","fs","promises","readFile","expect","code","toEqual","trim"],"sources":["../../src/__tests__/babel.test.ts"],"sourcesContent":["import { expect, test } from 'vitest';\nimport { transformFileAsync } from '@babel/core';\nimport fs from 'node:fs';\nimport path from 'node:path';\nimport plugin from '../babel';\n\ntest.each(['imports', 'exports'])(`adds extension to %s`, async (name) => {\n  const filepath = path.resolve(\n    __dirname,\n    `../__fixtures__/project/code/$${name}-input.ts`\n  );\n\n  const result = await transformFileAsync(filepath, {\n    caller: {\n      name: 'test',\n      supportsStaticESM: false,\n      rewriteImportExtensions: true,\n      jsxRuntime: 'automatic',\n      codegenEnabled: true,\n    },\n    configFile: false,\n    babelrc: false,\n    plugins: [\n      '@babel/plugin-syntax-typescript',\n      [plugin, { extension: 'mjs' }],\n    ],\n  });\n\n  const expected = await fs.promises.readFile(\n    path.resolve(__dirname, `../__fixtures__/project/code/$${name}-output.ts`),\n    'utf8'\n  );\n\n  expect(result?.code).toEqual(expected.trim());\n});\n"],"mappings":";;AAAA,IAAAA,OAAA,GAAAC,OAAA;AACA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAC,sBAAA,CAAAH,OAAA;AACA,IAAAI,SAAA,GAAAD,sBAAA,CAAAH,OAAA;AACA,IAAAK,MAAA,GAAAF,sBAAA,CAAAH,OAAA;AAA8B,SAAAG,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAE9BG,YAAI,CAACC,IAAI,CAAC,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,sBAAsB,EAAE,MAAOC,IAAI,IAAK;EACxE,MAAMC,QAAQ,GAAGC,iBAAI,CAACC,OAAO,CAC3BC,SAAS,EACT,iCAAiCJ,IAAI,WACvC,CAAC;EAED,MAAMK,MAAM,GAAG,MAAM,IAAAC,wBAAkB,EAACL,QAAQ,EAAE;IAChDM,MAAM,EAAE;MACNP,IAAI,EAAE,MAAM;MACZQ,iBAAiB,EAAE,KAAK;MACxBC,uBAAuB,EAAE,IAAI;MAC7BC,UAAU,EAAE,WAAW;MACvBC,cAAc,EAAE;IAClB,CAAC;IACDC,UAAU,EAAE,KAAK;IACjBC,OAAO,EAAE,KAAK;IACdC,OAAO,EAAE,CACP,iCAAiC,EACjC,CAACC,cAAM,EAAE;MAAEC,SAAS,EAAE;IAAM,CAAC,CAAC;EAElC,CAAC,CAAC;EAEF,MAAMC,QAAQ,GAAG,MAAMC,eAAE,CAACC,QAAQ,CAACC,QAAQ,CACzClB,iBAAI,CAACC,OAAO,CAACC,SAAS,EAAE,iCAAiCJ,IAAI,YAAY,CAAC,EAC1E,MACF,CAAC;EAED,IAAAqB,cAAM,EAAChB,MAAM,EAAEiB,IAAI,CAAC,CAACC,OAAO,CAACN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAAC;AAC/C,CAAC,CAAC","ignoreList":[]}
{"version":3,"file":"loadConfig.js","names":["_path","require","_package","searchPlaces","loadConfig","root","filename","result","requireConfig","content","name","filepath","config","__esModule","default","undefined","exports","join","e","code"],"sources":["../../src/utils/loadConfig.ts"],"sourcesContent":["import { join } from 'path';\nimport { name } from '../../package.json';\n\nconst searchPlaces = [\n  'bob.config.mjs',\n  'bob.config.cjs',\n  'bob.config.js',\n  'package.json',\n];\n\nexport const loadConfig = (\n  root: string\n): { filepath: string; config: unknown } | undefined => {\n  for (const filename of searchPlaces) {\n    const result = requireConfig(root, filename);\n\n    if (filename === 'package.json' && result != null) {\n      if (result.content[name] != null) {\n        return {\n          filepath: result.filepath,\n          config: result.content[name],\n        };\n      }\n    }\n\n    if (result != null) {\n      const content = result.content;\n\n      if (content?.__esModule) {\n        return {\n          filepath: result.filepath,\n          config: content.default,\n        };\n      }\n\n      return {\n        filepath: result.filepath,\n        config: content,\n      };\n    }\n  }\n\n  return undefined;\n};\n\nconst requireConfig = (root: string, filename: string) => {\n  const filepath = join(root, filename);\n\n  try {\n    // eslint-disable-next-line @typescript-eslint/no-require-imports\n    const content = require(filepath);\n\n    return {\n      filepath,\n      content,\n    };\n  } catch (e) {\n    if (\n      typeof e === 'object' &&\n      e != null &&\n      'code' in e &&\n      e.code === 'MODULE_NOT_FOUND'\n    ) {\n      // We expect that some of the config files won't exist\n      // So we just return undefined in that case\n      return undefined;\n    }\n\n    throw e;\n  }\n};\n"],"mappings":";;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAEA,MAAME,YAAY,GAAG,CACnB,gBAAgB,EAChB,gBAAgB,EAChB,eAAe,EACf,cAAc,CACf;AAEM,MAAMC,UAAU,GACrBC,IAAY,IAC0C;EACtD,KAAK,MAAMC,QAAQ,IAAIH,YAAY,EAAE;IACnC,MAAMI,MAAM,GAAGC,aAAa,CAACH,IAAI,EAAEC,QAAQ,CAAC;IAE5C,IAAIA,QAAQ,KAAK,cAAc,IAAIC,MAAM,IAAI,IAAI,EAAE;MACjD,IAAIA,MAAM,CAACE,OAAO,CAACC,aAAI,CAAC,IAAI,IAAI,EAAE;QAChC,OAAO;UACLC,QAAQ,EAAEJ,MAAM,CAACI,QAAQ;UACzBC,MAAM,EAAEL,MAAM,CAACE,OAAO,CAACC,aAAI;QAC7B,CAAC;MACH;IACF;IAEA,IAAIH,MAAM,IAAI,IAAI,EAAE;MAClB,MAAME,OAAO,GAAGF,MAAM,CAACE,OAAO;MAE9B,IAAIA,OAAO,EAAEI,UAAU,EAAE;QACvB,OAAO;UACLF,QAAQ,EAAEJ,MAAM,CAACI,QAAQ;UACzBC,MAAM,EAAEH,OAAO,CAACK;QAClB,CAAC;MACH;MAEA,OAAO;QACLH,QAAQ,EAAEJ,MAAM,CAACI,QAAQ;QACzBC,MAAM,EAAEH;MACV,CAAC;IACH;EACF;EAEA,OAAOM,SAAS;AAClB,CAAC;AAACC,OAAA,CAAAZ,UAAA,GAAAA,UAAA;AAEF,MAAMI,aAAa,GAAGA,CAACH,IAAY,EAAEC,QAAgB,KAAK;EACxD,MAAMK,QAAQ,GAAG,IAAAM,UAAI,EAACZ,IAAI,EAAEC,QAAQ,CAAC;EAErC,IAAI;IACF;IACA,MAAMG,OAAO,GAAGR,OAAO,CAACU,QAAQ,CAAC;IAEjC,OAAO;MACLA,QAAQ;MACRF;IACF,CAAC;EACH,CAAC,CAAC,OAAOS,CAAC,EAAE;IACV,IACE,OAAOA,CAAC,KAAK,QAAQ,IACrBA,CAAC,IAAI,IAAI,IACT,MAAM,IAAIA,CAAC,IACXA,CAAC,CAACC,IAAI,KAAK,kBAAkB,EAC7B;MACA;MACA;MACA,OAAOJ,SAAS;IAClB;IAEA,MAAMG,CAAC;EACT;AACF,CAAC","ignoreList":[]}